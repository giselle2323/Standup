<!DOCTYPE html>
<html lang="en">

<head>
	<title>StandUp</title>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<% include partials/links %>
	<script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0/dist/Chart.min.js"></script>
</head>

<body>
	<% include partials/flashmessage %>
	<div class="mainContainer">
		<div class="content">
			<% include partials/admin/sidebar %>
			<div class="innerContainer">
				<div class="heading">
					<h3>Dashboard</h3>
				</div>
					<div class="chart">
						<input type="hidden" id="result" value="<%= JSON.stringify(result) %>">
						<canvas id="myChart"></canvas>
					
					</div>
			</div>
		

		</div>
	</div>
	<script>
		let result = JSON.parse(document.getElementById("result").value);
		console.log(result);
		let datavalues = [];
		let labelvalues = [];
			for (i = 0; i < result.length; i++) {
			datavalues.push(result[i].avgScore);
			labelvalues.push(result[i].firstname);
			console.log(datavalues);
		}


		var ctx = document.getElementById('myChart').getContext('2d');
		var myChart = new Chart(ctx, {
			type: 'bar',
			data: {
				labels: labelvalues,
				datasets: [{
					label: 'Average Score of Quiz',
					data: datavalues,
					backgroundColor: [
						'rgba(255, 99, 132, 0.2)',
						'rgba(54, 162, 235, 0.2)',
						'rgba(255, 206, 86, 0.2)',
						'rgba(75, 192, 192, 0.2)',
						'rgba(153, 102, 255, 0.2)',
						'rgba(255, 159, 64, 0.2)'
					],
					borderColor: [
						'rgba(255, 99, 132, 1)',
						'rgba(54, 162, 235, 1)',
						'rgba(255, 206, 86, 1)',
						'rgba(75, 192, 192, 1)',
						'rgba(153, 102, 255, 1)',
						'rgba(255, 159, 64, 1)'
					],
					borderWidth: 1
				}]
			},
			options: {
				scales: {
					yAxes: [{
						ticks: {
							beginAtZero: true
						}
					}]
				}
			}
		});
	</script>
	<% include partials/scripts %>
</body>

</html>